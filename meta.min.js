/*
 Copyright (c) 2010 Rolando González Chévere <rolosworld@gmail.com>
 
 This file is part of Meta.
 
 Meta is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License version 3
 as published by the Free Software Foundation.
 
 Meta is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with Meta.  If not, see <http://www.gnu.org/licenses/>.
*/
(function(){var E=this,A,F=!!E.ActiveXObject,J={name:"Meta",author:"Rolando Gonz\u00e1lez, rolosworld@gmail.com",version:"2010.02.10"},i=E.Meta=function(){function b(){return i}function c(e){var k=i.its(e),f=i.extensions[k];if(f)e=i(f).extend({_:e});else if(k!="meta"){f=i();k=="function"||i.its(e,"object")?f.extend(e):f.extend({_:e});e=f}return e.constructor}function g(e){function k(){}var f;if(e!==A)f=c(e);if(f){k.prototype=new f;k.prototype.constructor=k}k.prototype.info=J;k.prototype.under=function(j){if(f){var n=
[],a,d=this.under,h=arguments.length;for(a=1;a<h;a++)n.push(arguments[a]);this.under=f.prototype.under;n=f.prototype[j].apply(this,n);this.under=d;return n}};k.prototype.extend=function(j,n){return b().inherit(this,j,n)};return k}return function(e){return new (g(e))}}();i.extensions={};i.son=function(b){function c(){}c.prototype=b;b=new c;b.constructor=c;return b};i.extend=function(b,c,g){g=g||[];for(var e in c)if(e!="constructor"&&b!=c[e]&&i.indexOf(g,e)<0)b[e]=c[e];return b};i.inherit=function(b,
c,g){var e=[],k=[],f={};if(g){k=g.exclude||k;e=g.params||e}if(typeof c=="function"){c.apply(f,e);c=f}b=b.constructor?b.constructor.prototype:b;return i.extend(b,c,k)};i.each=function(b,c,g){var e;if(g)for(e in b){if(c.call(b,b[e],e)===false)return false}else{e=0;for(g=b.length;e<g;e++)if(c.call(b,b[e],e)===false)return false}return true};i.its=function(b,c){var g=typeof b;if(c==g)return true;if(g=="object"||g=="function")g=b?b.nodeType?"element":Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1].toLowerCase():
"null";else if(g=="number")if(isNaN(b))g="nan";else isFinite(b)||(g=b>0?"infinite":"-infinite");if(g=="meta"&&i.has(b,"info")&&i.has(b.info,"name")){if(c==g)return true;g=b.info.name}if(c)return c==g;return g};i.obj2array=function(b,c){if(!c&&!F)return Array.prototype.slice.call(b);else{var g=[];i.each(b,function(e){g.push(e)},c);return g}};i.indexOf=function(b,c,g){for(var e=b.length;e--;)if(g){if(b[e]==c)break}else if(b[e]===c)break;return e};i.unique=function(b){var c=[],g,e;g=0;for(e=b.length;g<
e;g++)i.indexOf(c,b[g])<0&&c.push(b[g]);return c};i.has=function(b,c){return b&&b[c]!==A&&b[c]!==null};i.genProperties=function(b,c,g){var e=0;b=b.split(",");for(var k=b[0];e<b.length;k=b[++e])g[k]=c(k)};i.toggle=function(b,c,g){g=g||false;return function(){return((g=!g)?b:c).apply(this,arguments)}};i.core=i();i.core.extend({_:null,bro:function(b){return(new this.constructor).set(b)},its:function(b){return i.its(this._,b)},get:function(){return this._},set:function(b){this._=b;return this},wrap:function(b,
c){return this._[b].apply(this._,c)},copy:function(){return this.bro().set(this.get())},callback:function(b){for(var c=this,g=[],e=1,k=arguments;e<k.length;e++)g.push(k[e]);return function(){return c[b].apply(c,g)}},getMe:function(){return this}});i.ajax=function(b,c,g,e){function k(){if(c){var a=f.readyState;if(!n&&a==4)c.call(j,j);else c[a]&&c[a].call(j,j)}}g=g||"";e=e===A?i.ajax.async:e;var f=F?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,j={status:function(){return f.status},text:function(){return f.responseText},
json:function(){return eval("("+(j.text()||"null")+")")},xml:function(){return f.responseXML}},n=i.its(c,"array");f.open("POST",b,e);if(e)f.onreadystatechange=k;f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.send(g);e||k();return f};i.ajax.async=true;i.string=i(i.core);i.string.extend({bro:function(b){return(new this.constructor).set(b||"")},set:function(b){return this.under("set",""+b)},len:function(){return this.get().length},dos2unix:function(){return this.replace(/\r\n|\r/g,
"\n")},unix2dos:function(){return this.replace(/\n/g,"\r\n")},stripTags:function(){return this.replace(/<\/?[^>]+>/g,"")},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},unescapeHTML:function(){var b=document.createElement("div");b.innerHTML=this.stripTags().get();return this.set(b.childNodes[0]?b.childNodes[0].nodeValue:"")},trim:function(){return this.replace(/^\s+|\s+$/g,"")},rtrim:function(){return this.replace(/\s+$/,
"")},ltrim:function(){return this.replace(/^\s+/,"")},insertAt:function(b,c){var g=this.get();return this.set(g.substr(0,b)+c+g.substr(b))},addSlashes:function(){return this.replace(/\\/g,"\\\\").replace(/\'/g,"\\'")},stripSlashes:function(){return this.replace(/\\'/g,"'").replace(/\\\\/g,"\\")},nl2br:function(){return this.dos2unix().replace(/\n/g,"<br/>")},br2nl:function(){return this.replace(/<br\s*\/?>/gi,"\n")},toInt:function(){return parseInt(this.get().match(/\d/g).join(""),10)}});i.string.extend(function(){var b=
i.genProperties;b("replace,concat,substr,substring,slice,toUpperCase,toLowerCase",function(c){return function(){return this.set(this.wrap(c,arguments))}},this);b("charAt,charCodeAt,indexOf,lastIndexOf,search,match,split,valueOf",function(c){return function(){return this.wrap(c,arguments)}},this)});i.extensions.string=i.string;i.array=i(i.core);i.array.extend({bro:function(){var b=new this.constructor,c;b.set([]);i.each(arguments,function(g){c=i.its(g);if(c=="array")b.set(g);else c!="undefined"&&b.push(g)});
return b},get:function(b){var c=this.under("get");return i.its(b,"number")?c[b]:c},set:function(b,c){if(i.its(c,"number"))this.get()[c]=b;else{i.its(b,"array")||(b=[b]);this.under("set",b)}return this},indexOf:function(b,c){var g=this.get(),e=g.length;for(c=c||0;c<e;c++)if(g[c]===b)return c;return-1},lastIndexOf:function(b,c){var g=this.get();for(c=c+1||g.length;c--;)if(g[c]===b)break;return c},some:function(b,c){c=c||this;var g=this.get();return!i.each(g,function(e,k){if(b.call(c,e,k,g))return false})},
every:function(b,c){c=c||this;var g=this.get();return i.each(g,function(e,k){if(!b.call(c,e,k,g))return false})},filter:function(b,c){c=c||this;var g=[],e=this.get();i.each(e,function(k,f){b.call(c,k,f,e)&&g.push(k)});return g},forEach:function(b,c){var g=this.get();c=c||this;i.each(g,function(e,k){b.call(c,e,k,g)});return this},map:function(b,c){c=c||this;var g=[],e=this.get();i.each(e,function(k,f){g.push(b.call(c,k,f,e))});return g},numSort:function(){return this.sort(function(b,c){return b-c})},
insert:function(b,c){c==A?this.push(b):this.splice(c,0,b);return this},drop:function(b,c){return this.splice(b,c||1)},unique:function(){return this.set(i.unique(this.get()))},len:function(){return this.get().length},reduce:function(b,c){var g=this.len(),e=0,k=this.get();for(c=c||k[e++];e<g;e++)c=b.call(this,c,k[e],e,k);return c},reduceRight:function(b,c){var g=this.len(),e=g-1,k=this.get();if(!(g<1&&!c)){for(g=c||k[e--];e>=0;e--)g=b.call(this,g,k[e],e,k);return g}},shuffle:function(){for(var b=this.get(),
c=b.length,g=c-1,e,k;c--;){e=Math.round(Math.random()*g);k=b[c];b[c]=b[e];b[e]=k}return this}});i.array.extend(function(){var b=i.genProperties;b("push,sort,splice,unshift,reverse",function(c){return function(){this.wrap(c,arguments);return this}},this);b("pop,shift,join",function(c){return function(){return this.wrap(c,arguments)}},this);b("concat,slice",function(c){return function(){return this.set(this.wrap(c,arguments))}},this)});i.extensions.Array=i.array;i.cookie=i(i.core);i.cookie.extend({create:function(b){var c=
this.get()+"="+b.value,g;for(g in b)if(g!="value")c+=";"+g+"="+b[g];document.cookie=c},read:function(){for(var b=document.cookie.split(";"),c,g=b.length;g--;){c=b[g].replace(/^\s*|\s*$/g,"").split("=");if(c[0]==this.get())return decodeURIComponent(c[1])}return null},erase:function(){var b=new Date;b.setDate(b.getDate()-9);this.create({value:"","max-age":0,expire:b.toUTCString()})}});i.sandbox=function(){var b=document.createElement("iframe"),c,g;b.style.display="none";document.body.appendChild(b);
g=frames[frames.length-1];c=g.document;c.writeln("<script>window.sandbox=window.ActiveXObject?this:{eval:function(s){return eval(s)}};<\/script>");c.close();return{eval:function(e){return g.sandbox.eval(e)},include:function(e){var k=c.createElement("script");k.src=e;c.body.appendChild(k)}}};i.events=i(i.core);i.events.extend(function(){var b={},c=i.array.bro();this.onNewEvent=function(){};this.onEmptyEvent=function(){};this.onFireEvent=function(){};this.addEvent=function(g,e,k,f){f=f===A?1:f;var j=
-1,n=this;if(b[g])j=n.indexOfEvent(g,e);else b[g]=[];if(j<0){j={type:g,obj:e,cb:function(){return n.fireEvent.apply(n,c.set([g,e]).concat(i.obj2array(arguments)).get())},fn:[]};b[g].push(j);n.onNewEvent(j)}else j=b[g][j];c.set(j.fn);if(i.its(k,"array")){c.concat(k);j.fn=c.get()}else if(f||c.indexOf(k)<0)c.push(k);return n};this.getEvent=function(g,e){return b[g]&&b[g][e]?b[g][e]:null};this.getObjectEvents=function(g){var e=[],k,f=this;for(var j in b){k=f.indexOfEvent(j,g);k>-1&&e.push(b[j][k])}return e};
this.indexOfEvent=function(g,e){var k=-1;if(!b[g])return k;c.set(b[g]).every(function(f,j){if(f.obj==e){k=j;return false}return true});return k};this.fireEvent=function(g,e){var k=this,f=k.indexOfEvent(g,e),j=true,n;if(f<0)return false;f=b[g][f];n=[];i.each(arguments,function(a,d){d>1&&n.push(a)});i.each(f.fn,function(a){if(a.apply(e,n)===false)j=false});k.onFireEvent(f,j,n);return j};this.rmEvent=function(g,e,k){var f=-1,j,n=this.indexOfEvent(g,e);if(n<0)return this;e=b[g][n];if(k){j=c.set(e.fn);
f=j.indexOf(k);f>-1&&j.drop(f)}else e.fn=[];if(!e.fn.length){c.set(b[g]).drop(n);this.onEmptyEvent(e)}return this};this.rmObject=function(g){var e=this;i.each(b,function(k,f){e.rmEvent(f,g)},1);return e};this.flush=function(g){g=g||function(){return 1};var e=this,k=[],f;i.each(b,function(j,n){for(f=j.length;f--;)g(n,j[f].obj)&&e.rmEvent(n,j[f].obj);j.length||k.push(n)},1);for(f=k.length;f--;)delete b[k[f]];return e};this.ev=b});i.domevent=i(i.events);i.domevent.extend(i.array);i.domevent.extend({valid_type:" abort blur change click dblclick error focus keydown keypress keyup load mousedown mousemove mouseout mouseover mouseup reset resize select submit unload ",
onNewEvent:function(b){if(this.valid_type.indexOf(" "+b.type+" ")!=-1)if(i.has(b.obj,"addEventListener"))b.obj.addEventListener(b.type,b.cb,false);else i.has(b.obj,"attachEvent")&&b.obj.attachEvent("on"+b.type,b.cb)},onEmptyEvent:function(b){if(this.valid_type.indexOf(" "+b.type+" ")!=-1)if(i.has(b.obj,"removeEventListener"))b.obj.removeEventListener(b.type,b.cb,false);else i.has(b.obj,"detachEvent")&&b.obj.detachEvent("on"+b.type,b.cb)},onFireEvent:function(b,c,g){if(!(c||this.valid_type.indexOf(" "+
b.type+" ")==-1)){g[0].cancelBubble=true;g[0].returnValue=false;g[0].stopPropagation&&g[0].stopPropagation();g[0].preventDefault&&g[0].preventDefault()}},on:function(b,c){var g=this;if(c)return g.forEach(function(e){g.addEvent(b,e,c)})},fire:function(b){var c=this;return c.forEach(function(g){g["on"+b]&&g["on"+b]();c.fireEvent(b,g)})},rmOn:function(b,c){var g=this;return g.forEach(function(e){g.rmEvent(b,e,c)})},cleanEvents:function(){return this.flush(function(b,c){return c.parentNode===null})}});
i.domevent.addEvent("unload",E,function(){i.events.flush();document&&document.body&&i.dom.purge(document.body)});i.dom=i(i.domevent);i.dom.info.name="Meta.dom";i.dom.extend(function(){function b(){j=i.sandbox();return n=j.eval('document.createElement("div");')}function c(a){if(a=="float")a=F?"styleFloat":"cssFloat";a=a.split("-");for(var d=1,h=a.length,l;d<h;d++){l=a[d];a[d]=l.charAt(0).toUpperCase();a[d]+=l.substr(1)}return a.join("")}function g(a){return a.value!==null&&a.value!==A&&a.value.length>
0?a.value:a.text}var e={before:function(a,d,h){h&&h.insertBefore(d,a)},after:function(a,d,h){h&&h.insertBefore(d,a.nextSibling)},replace:function(a,d,h){h&&h.replaceChild(d,a)},prepend:function(a,d){a.insertBefore(d,a.firstChild||null)},append:function(a,d){a.appendChild(d)}},k=i.string.bro(),f=i.array.bro(),j,n;return{_doc:document,bro:function(){var a=["bro"],d=arguments;if(d.length)a=a.concat(i.obj2array(d));else a.push(this.doc());return this.under.apply(this,a)},set:function(a,d){return this.under("set",
a||this.doc(),d)},doc:function(a){if(!a)return this._doc=this._doc||document;if(!i.its(a,"string")){this._doc=a.nodeType==9?a:a.ownerDocument?a.ownerDocument:document;return this}if(F){this._doc=new ActiveXObject("Msxml2.DOMDocument");this._doc.async=false;this._doc.loadXML(a)}else this._doc=(new DOMParser).parseFromString(a,"text/xml");this.set(i.obj2array(this._doc.childNodes));return this},select:function(a){var d=this,h=[],l=i.select;if(d.len())d.forEach(function(o){h=h.concat(l(a,o))});else h=
l(a,d.doc());d.set(h);return d},evalGlobal:function(a){var d=this.doc(),h=d.createElement("script"),l=d.getElementsByTagName("head")[0]||d.documentElement;h.type="text/javascript";if(F)h.text=a;else h.appendChild(d.createTextNode(a));l.insertBefore(h,l.firstChild);l.removeChild(h);return this},glue:function(a,d){if(a==="")return this;var h,l=this,o=e[d||"append"];d=l.bro();var m=f.bro(),p=f.bro();if(a.nodeType)d.set(a);else typeof a=="string"?d.create(a):d.set(a);h=l.doc().createDocumentFragment();
d.forEach(function(r){if(r.nodeName.toLowerCase()=="script")m.push(r);else r.nodeType==1&&m.concat(i.obj2array(r.getElementsByTagName("script")));h.appendChild(r)});m.forEach(function(r){if(!r.src){p.push(r.text||r.textContent||r.innerHTML||"");r.parentNode.removeChild(r)}});p=p.join("\n");l.forEach(function(r,w){o(r,w?h.cloneNode(true):h,r.parentNode);p&&l.evalGlobal(p)});return l},remove:function(){for(var a=this._,d=a.length,h;d--;){h=a[d];h.parentNode&&h.parentNode.removeChild(h)}return this},
create:function(a){var d=this.doc().createElement("div"),h=[],l;if(this.isXML(d)){(l=n)||(l=b());l.innerHTML=a;i.dom.copyNodes(l.childNodes,d)}else if(F){d.innerHTML="<br>"+a;d.removeChild(d.firstChild)}else d.innerHTML=a;for(;l=d.firstChild;)h.push(d.removeChild(l));return this.set(h)},prop:function(a,d){return(d=this.get(d||0))?a in d?d[a]:null:d},attr:function(a,d){var h,l=this._;h=l.length;var o,m;if(!h)return null;o=l[0];m=o.attributes;if(!a)return m;if(d!==A){for(h=h;h--;)d===null&&l[h].removeAttribute?
l[h].removeAttribute(a):l[h].setAttribute(a,d);return this}if(!m)return null;return o.getAttribute(a)},css:function(a,d){var h=this._,l=h.length;a=c(a);if(d===A)return l?h[0].style[a]:null;for(;l--;)h[l].style[a]=d;return this},style:function(a,d){if(d=this.get(d||0)){a=c(a);d=E.getComputedStyle?E.getComputedStyle(d,null).getPropertyValue(a):d.currentStyle[a]}return d},val:function(a){var d,h=[],l,o=this._,m=o.length,p=i.indexOf;if(a!==A){for(;m--;){d=o[m];if(d.nodeName=="SELECT"){a.push||(a=[a]);
l=d.options;for(d=l.length;d--;){h=l[d];h.selected=false;if(p(a,g(h),1)>-1)h.selected=true}}else d.value=a}return this}if(!m)return null;a=o[0];if(a.nodeName!="SELECT")return a.value||null;if(!a.multiple)return g(a.options[a.selectedIndex]);a=a.options;for(d in a)a[d].selected&&h.push(g(a[d]));return h},outer:function(a){var d=this._,h=d.length,l;a=d[a||0];if(!a||!a.nodeType)return null;if(a.nodeType==3)return a.nodeValue;if(!F){if(this.isXML(a))return(new XMLSerializer).serializeToString(a);d=this.doc().createElement("b");
d.appendChild(a);return d.innerHTML}d=this.isXML(a)?"xml":"outerHTML";if(a.nodeType!=11)l=a[d];else{l=[];a=a.childNodes;for(h=a.length;h--;)l.push(a[h][d]);l.reverse();l=l.join("")}return l},inner:function(a,d){var h=this._,l="",o;if(a===A){if(!h.length)return null;d=h[0];if(!this.isXML(d))return d.innerHTML;a=this.bro();d=d.childNodes;h=0;for(o=d.length;h<o;h++)l+=a.set(d[h]).outer();return l}return this.empty().append(a,d)},text:function(a){if(a===A){a=this._;if(!a.length)return null;a=a[0];return a.innerHTML?
a.innerHTML.replace(/<\/?[^>]+>/gi,""):a.text||a.textContent}return this.empty().append(this.doc().createTextNode(a))},elements:function(a){var d=this._;if(!d.length)return null;var h=[],l=d[0];if(l.nodeName.toUpperCase()!="FORM")return null;l=l.elements;for(d=l.length;d--;)if(a===A)h.push(h[l[d].name]=l[d]);else if(l[d].name==a)return l[d];return a?null:h},submit:function(a){var d=this._;if(!d.length)return this;a=a||function(){};for(var h=this.elements(),l=this.bro(),o=[],m=0,p,r,w;m<h.length;m++){w=
h[m];if(w.nodeName.toUpperCase()!="FIELDSET")if(!(w.nodeName.toUpperCase()=="INPUT"&&(w.type.toLowerCase()=="checkbox"||w.type.toLowerCase()=="radio")&&!w.checked)){p=l.set(w).val();r=encodeURIComponent(w.name,1)+"=";i.its(p,"array")?i.each(p,function(x){o.push(r+encodeURIComponent(x===null||x===A?"":x,1))}):o.push(r+encodeURIComponent(p===null||p===A?"":p,1))}}i.ajax(d[0].action,a,o.join("&"));return this},nodes:function(a){var d=this._,h=[],l=d.length;a=a||0;if(l<=a)return null;l=d[a].childNodes;
d=l.length;for(a=0;a<d;a++)l[a].nodeType==1&&h.push(l[a]);return h},empty:function(){for(var a,d=this._,h=d.length,l=this.isXML();h--;){a=d[h];if(l)for(;a.firstChild;)a.removeChild(a.firstChild);else a.innerHTML=""}return this},hasClass:function(a,d){var h=this._,l=h.length;d=d||0;if(l<=d)return false;d=h[d];if(!d.className)return false;return(" "+d.className+" ").indexOf(" "+a+" ")>-1},addClass:function(a){for(var d=this._,h=d.length,l;h--;){l=d[h];if("className"in l)l.className=k.set(f.set(l.className.split(" ")).insert(a).unique().get().join(" ")).trim().get()}return this},
rmClass:function(a){for(var d=this._,h=d.length,l,o,m;h--;){l=d[h];if(l.className){o=f.set(l.className.split(" ")).unique();m=o.indexOf(a);if(m>-1)l.className=k.set(o.splice(m,1).get().join(" ")).trim().get()}}return this},dims:function(a){if(a=this.get(a||0)){for(var d=a.offsetLeft||0,h=a.offsetTop||0,l=a.offsetWidth||0,o=a.offsetHeight||0;a=a.offsetParent;){d+=a.offsetLeft-a.scrollLeft+(a.clientLeft?a.clientLeft:0);h+=a.offsetTop-a.scrollTop+(a.clientTop?a.clientTop:0)}a={left:d,top:h,width:l,height:o}}return a},
scrollDims:function(a){return(a=this.get(a||0))?{left:a.scrollX||a.scrollLeft,top:a.scrollY||a.scrollTop,width:a.scrollWidth||0,height:a.scrollHeight||0}:a},opacity:function(a){var d=Math.round(a*100);return this.css("MozOpacity",a).css("opacity",a).css("KHTMLOpacity",a).css("zoom",1).css("filter","alpha(opacity="+d+")")},hide:function(){return this.css("display","none")},show:function(a){return this.css("display",a||"")},parent:function(a){return this.prop("parentNode",a)},next:function(a){for(a=
this.get(a||0);a&&(a=a.nextSibling)&&a.nodeType!=1;);return a},prev:function(a){for(a=this.get(a||0);a&&(a=a.previousSibling)&&a.nodeType!=1;);return a},first:function(a){for(a=this.prop("firstChild",a);a&&a.nodeType!=1;)a=a.nextSibling;return a},last:function(a){for(a=this.prop("lastChild",a);a&&a.nodeType!=1;)a=a.previousSibling;return a},value:function(a){return this.prop("nodeValue",a)},type:function(a){return this.prop("nodeType",a)},name:function(a){return this.prop("nodeName",a)},isXML:function(a){a||
(a=this.doc());a=a.nodeType==9?a:a.ownerDocument;return a.documentElement.nodeName!=="HTML"}}}());i.dom.extend(function(){i.genProperties("prepend,append,before,after,replace",function(b){return function(c){return this.glue(c,b)}},this)});i.dom.extend(function(){var b={prependTo:"prepend",appendTo:"append",insertBefore:"before",insertAfter:"after",replaceIn:"replace"};i.genProperties("prependTo,appendTo,insertBefore,insertAfter,replaceIn",function(c){return function(g){var e=this._;return this.set(g).glue(e,
b[c]).set(e)}},this)});i.extensions.element=i.dom;i.dom.copyNodes=function(b,c,g,e){var k=c.ownerDocument?c.ownerDocument:c.nodeType==9?c:document,f=function(n,a){for(var d,h=0,l=a.length;h<l;h++){if(a[h].nodeType==1)d=n.appendChild(j(a[h]));else a[h].nodeType==3&&n.appendChild(k.createTextNode(a[h].nodeValue));if(e==a[h])e=d}},j=function(n){if(g&&n&&!n.id&&i.has(n,"uniqueID"))n.id=n.uniqueID;var a=i.dom.cloneTag(n);f(a,n.childNodes);return a};f(c,b);return e};i.dom.cloneTag=function(b,c){c=c||(b.ownerDocument?
b.ownerDocument:document);c=c.createElement(b.nodeName.toLowerCase());var g;b=b.attributes;for(g=b.length;g--;)c.setAttribute(b[g].name,b[g].value);return c};i.dom.cloneNode=function(b,c){c=c||(b.ownerDocument?b.ownerDocument:document);if(b.nodeType==3)return c.createTextNode(b.nodeValue);c=i.dom.cloneTag(b,c);i.dom.copyNodes(b.childNodes,c);return c};i.dom.ready=function(){var b=0,c,g,e=i.events.bro(),k;e.extend({fireReady:function(){if(!b){b=1;this.fireEvent("ready",E);g&&clearInterval(g)}}});k=
e.callback("fireReady");if(i.has(document,"addEventListener"))document.addEventListener("DOMContentLoaded",k,false);else if(i.has(E,"ActiveXObject")){c=document.createElement("script");c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){k();c.onreadystatechange=null}};c.defer=true;c.src="javascript:void(0);";document.getElementsByTagName("HEAD")[0].appendChild(c)}else if(/Safari/i.test(navigator.userAgent))g=setInterval(function(){/loaded|complete/.test(document.readyState)&&
k()},10);i.dom.addEvent("load",E,k);return function(f){b?f():e.addEvent("ready",E,f)}}();i.dom.purge=function(b){if(F||b.attributes){var c=b.attributes,g,e;if(c)for(g=c.length;g--;){e=c[g].name;if(typeof b[e]==="function")b[e]=null}if(c=b.childNodes)for(g=c.length;g--;)i.dom.purge(c[g])}};i.guiEngine=i(function(){function b(){if(!("meta_sel"in p)){p.meta_sel=1;p.meta_onselectstart=m.get().onselectstart;p.meta_unselectable=m.get().unselectable;p.meta_MozUserSelect=m.css("MozUserSelect");p.meta_KhtmlUserSelect=
m.css("KhtmlUserSelect")}}function c(){if("meta_sel"in p){m.css("MozUserSelect",p.meta_MozUserSelect);m.css("KhtmlUserSelect",p.meta_KhtmlUserSelect);m.get().onselectstart=p.meta_onselectstart;m.get().unselectable=p.meta_unselectable}}function g(){b();m.get().onselectstart=function(){return false};m.get().unselectable="on";m.css("MozUserSelect","none").css("KhtmlUserSelect","none")}function e(u){return u?u:E.event}function k(u){if(!v||!h.len())return false;u=e(u);var q=[u.screenX-x[0],u.screenY-x[1]];
"mmv"in C[v]&&C[v].mmv(u,q);u.cancelBubble=true;return false}function f(u){u=e(u);h.set(u.target||u.srcElement);v=h.attr("gui");if(!(v in C))return false;var q=h.attr("dad"),z=h.attr("limit");q&&h.select("#"+q);z?l.select("#"+z):l.set(m.get());n();"md"in C[v]&&C[v].md(u);x=[u.screenX,u.screenY];u.cancelBubble=true;return false}function j(u){if(!v)return false;u=e(u);"mu"in C[v]&&C[v].mu(u);x=[u.screenX,u.screenY];u.cancelBubble=true;v="";return false}function n(){var u=l.dims();r=[u.left,u.top,t.width+
u.left,t.height+u.top]}function a(){if(!y){o.on("mousemove",k).on("mousedown",f).on("mouseup",j);y=1;m=i.dom.bro().set(document.body);l.set(m.get());n()}}function d(){if(y){o.rmOn("mousemove",k).rmOn("mousedown",f).rmOn("mouseup",j);y=0}}var h=i.dom.bro(),l=i.dom.bro(),o=i.domevent.bro(document),m,p={},r=[0,0,0,0],w={left:0,top:0,width:0,height:0},x=[0,0],v="",y=0,C={drag:{md:function(){w=h.dims();g();h.css("position","absolute").css("zIndex","1")},mu:function(){c();h.css("zIndex","0")},mmv:function(u,
q){var z=w,B=[r[2]-s[0],r[3]-s[1]];q=[z.left+q[0],z.top+q[1]];if(q[0]>=r[0]&&q[0]<B[0]){z.left=q[0];x[0]=u.screenX}else if(q[0]<r[0])q[0]=r[0];else if(q[0]>B[0])q[0]=B[0];if(q[1]>=r[1]&&q[1]<B[1]){z.top=q[1];x[1]=u.screenY}else if(q[1]<r[1])q[1]=r[1];else if(q[1]>B[1])q[1]=B[1];h.css("left",q[0]+"px");h.css("top",q[1]+"px")}},resize:{md:function(){g()},mu:function(){c()},mmv:function(u,q){var z=h.dims();q=[z.width+q[0],z.height+q[1]];if(q[0]>=10){h.css("width",q[0]+"px");x[0]=u.screenX}if(q[1]>=10){h.css("height",
q[1]+"px");x[1]=u.screenY}}}};return{guiStart:a,guiStop:d,guiEngine:function(){return y}}}());i.select=function(){function b(f,j,n){var a,d=0;if(f){d=1;for(a in j)if(j[a]&&!n[a](f,j[a])){d=0;break}}return d}var c={CHUNKER:/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]+['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[]+)+|[>+~])(\s*,\s*)?/g,ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/g,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/g,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/g,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/g,
TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/g,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/g,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/g,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/g},g={"=":function(f,j){return f==j},"!=":function(f,j){return f!=j},"~=":function(f,j){return f!==null&&(" "+f+" ").indexOf(j)>-1},"^=":function(f,j){return f!==null&&f.indexOf(j)==0},"*=":function(f,j){return f!==null&&f.indexOf(j)>-1},"$=":function(f,
j){return f!==null&&f.lastIndexOf(j)+j.length==f.length},"|=":function(f,j){return f==j||f.indexOf(j+"-")==0},"":function(f){return f!==null}},e={tag:function(f,j){return f.nodeName==j||j=="*"},className:function(f,j){return(f=f.className)&&(" "+f+" ").indexOf(" "+j+" ")>-1},attr:function(f,j){for(var n,a,d=j.length;d--;){a=j[d];n=a[1];if(f.nodeType==1){n=f.getAttribute(n);if(n!==null&&a[2](n,a[4]))continue}return 0}return 1},pseudo:function(){return 0},nest:function(f,j){var n=j[0];j=j[1];var a;
if(!f)return 0;if(n[parseInt(f.getAttribute(j),10)]!=f){a=n.length;f.setAttribute(j,a);n[a]=f;return 1}return 0}},k={">":function(f,j,n,a,d,h,l){var o=f.childNodes;a=[];j=0;for(n=o.length;j<n;j++){f=o[j];f.nodeType==1&&h(f,d,l)&&a.push(f)}return a},"~":function(f,j,n,a,d,h,l){for(j=[];f=f.nextSibling;)f.nodeType==1&&h(f,d,l)&&j.push(f);return j},"+":function(f,j,n,a,d,h,l){for(;(f=f.nextSibling)&&f.nodeType!=1;);return h(f,d,l)?[f]:[]}};return function(f,j){j=j||document;if(j.querySelectorAll)return i.obj2array(j.querySelectorAll(f));
var n=c.CHUNKER,a,d,h,l,o,m=[j],p=c.ID,r=c.CLASS,w=c.ATTR,x=c.TAG,v=j.nodeType==9?j:j.ownerDocument,y,C,u,q,z,B,K=v.documentElement.nodeName!=="HTML",G,I=0,H=[],D={};for(n.lastIndex=0;a=n.exec(f);){l=a[1];if(l==">"||l=="~"||l=="+")o=k[l];else{G=[];p.lastIndex=0;if(d=p.exec(l)){q=v.getElementById(d[1]);m=e.nest(q,[G,"data-metaNest"])?[q]:[]}else{D.nest=[G,"data-metaNest"];D.attr=[];for(w.lastIndex=0;(d=w.exec(l))!==null;){d[2]=g[d[2]||""];D.attr.push(d)}if(!D.attr.length)D.attr=0;if(!D.attr){r.lastIndex=
0;d=r.exec(l);D.className=d?d[1]:d}x.lastIndex=0;d=(d=x.exec(l))?d[1]:"*";d=K?d:d.toUpperCase();D.tag=d;z=[];y=0;for(C=m.length;y<C;y++){q=m[y];if(o)z=z.concat(o(q,d,"data-metaNest",G,D,b,e));else{r.lastIndex=0;if((h=r.exec(l))&&q.getElementsByClassName){B=q.getElementsByClassName(h[1]);h=0}else B=q.getElementsByTagName(d);if(!h)D.className=0;h=0;for(u=B.length;h<u;h++){q=B[h];b(q,D,e)&&z.push(q)}}}m=z}o=null;if(a[2]&&a[2].replace(/^\s+|\s+$/g,"")==","){H[I++]=m;m=[j]}}}H[I]=m;G=[];m=[];y=0;for(C=
H.length;y<C;y++){B=H[y];h=0;for(u=B.length;h<u;h++){q=B[h];e.nest(q,[G,"data-metaNest"])&&m.push(q)}}return m}}();i.animation=function(){function b(k,f,j,n,a,d){function h(){var x=(new Date).getTime();if(x>=m)return false;a.call(d,f+(x-o)*p/r)}function l(){k&&k.call(w,d)}var o=(new Date).getTime(),m=o+(n||200),p=j-f,r=m-o,w=this;c.addEvent("frameStep",c,h);c.addEvent("stopAnim",c,l);c.fireEvent("frameStep",c)}var c=i.events.bro(),g=1E3/30,e=["clip","position","width","height","left","top","display",
"visibility","overflow","filter","MozOpacity","zoom","opacity","KHTMLOpacity"];c.onFireEvent=function(k,f){if(k.type=="frameStep")if(f)setTimeout(c.callback("fireEvent","frameStep",c),g);else{c.rmEvent("frameStep",c);c.fireEvent("stopAnim",c);c.rmEvent("stopAnim",c)}};return i.son({data:"data-meta_",cssBackup:function(){var k=i.dom.bro(),f,j=this;return j.forEach(function(n){k.set(n);n=parseInt(k.attr(j.data+"bak"),10)||0;k.attr(j.data+"bak",n+1);if(!n){i.each(e,function(a){f=k.css(a);f!==null&&k.attr(j.data+
a,f)});if(!k.attr(j.data+"size_w")){f=k.dims();k.attr(j.data+"size_w",f.width).attr(j.data+"size_h",f.height)}if(!k.attr(j.data+"pos_l")){f=k.dims();k.attr(j.data+"pos_l",f.left).attr(j.data+"pos_t",f.top)}}})},cssRestore:function(k){function f(d){n=j.attr(a.data+d);j.css(d,"");n!==null&&j.css(d,n)}var j=i.dom.bro(),n,a=this;return a.forEach(function(d){if(j.set(d).attr(a.data+"bak"))k?f(k):i.each(e,f)})},cssBackupClear:function(){var k=i.dom.bro(),f=this;return f.forEach(function(j){k.set(j);i.each(e,
function(n){k.attr(f.data+n,null)});k.attr(f.data+"bak",null).attr(f.data+"size_w",null).attr(f.data+"size_h",null).attr(f.data+"pos_l",null).attr(f.data+"pos_t",null)})},animate:function(k,f,j,n,a,d){var h=this;h.cssBackup();h.cssRestore("display");h.__||c.addEvent("stopAnim",c,function(){if(d){h.cssRestore();h.cssBackupClear()}h.__=0});h.__=1;return this.forEach(function(l){b.call(h,a,k.call(l),f.call(l),j,n,l)})}})}();i.inherit(i.animation,{slide:function(b,c,g){var e=this,k=i.dom.bro(),f,j,n,
a,d=function(){return 0},h=function(){return k.set(this).dims().width},l=function(){return k.set(this).dims().height},o=function(){return 1},m=function(v){k.set(this).css("width",v+"px").css("overflow","hidden")},p=function(v){k.set(this).css("height",v+"px").css("overflow","hidden")},r=function(v){k.set(this);var y=[k.attr(e.data+"size_w"),k.attr(e.data+"size_h")];k.css("width",v*y[0]+"px").css("height",v*y[1]+"px").css("overflow","hidden")},w=function(v){g&&g.call(e,v)},x=function(v){k.set(v).hide();
g&&g.call(e,v)};({"up-left":function(){f=o;j=d;n=r;w=x},right:function(){f=d;j=h;n=m;a=1},left:function(){f=h;j=d;n=m;w=x},up:function(){f=l;j=d;n=p;w=x},down:function(){f=d;j=l;n=p;a=1},"down-right":function(){f=d;j=o;n=r;a=1}})[b]();return e.animate(f,j,c,n,w,a)}});i.inherit(i.animation,{fade:function(b,c,g){var e=this,k=i.dom.bro(),f,j;f=function(){return 0};var n=function(){return 1},a=function(h){g&&g.call(e,h)},d=function(h){k.set(h).hide();g&&g.call(e,h)};if(b=="out"){b=n;f=f;a=d}else{b=f;
f=n;j=1}return this.animate(b,f,c,function(h){k.set(this).opacity(h)},a,j)}});i.inherit(i.animation,{clip:function(b,c,g){var e=i.dom.bro(),k,f,j,n=function(){return 0},a=function(){return e.set(this).dims().width},d=function(){return e.set(this).dims().height},h=function(){return 1},l=function(o,m,p,r){e.css("overflow","hidden").css("position","absolute").css("clip","rect("+o+"px "+m+"px "+p+"px "+r+"px)")};[function(){k=n;f=d;j=function(o){e.set(this);var m=e.dims();l(o,m.width,m.height,0)}},function(){k=
a;f=n;j=function(o){e.set(this);var m=e.dims();l(0,o,m.height,0)}},function(){k=d;f=n;j=function(o){e.set(this);var m=e.dims();l(0,m.width,o,0)}},function(){k=n;f=a;j=function(o){e.set(this);var m=e.dims();l(0,m.width,m.height,o)}},function(){k=n;f=d;j=function(o){e.set(this);var m=e.dims();l(o,m.width,m.height-o,0)}},function(){k=n;f=a;j=function(o){e.set(this);var m=e.dims();l(0,m.width-o,m.height,o)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims(),p=o*m.width;o=m.height*o;l(o,m.width-
p,m.height-o,p)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims();l(m.height*o,m.width-o*m.width,m.height,0)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims();l(0,m.width,m.height-m.height*o,o*m.width)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims();l(m.height*o,m.width,m.height,o*m.width)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims();l(0,m.width-o*m.width,m.height-m.height*o,0)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims(),p=m.height*
o;l(p,m.width-o*m.width,m.height-p,0)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims(),p=o*m.width;l(m.height*o,m.width-p,m.height,p)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims(),p=m.height*o;l(p,m.width,m.height-p,o*m.width)}},function(){k=n;f=h;j=function(o){e.set(this);var m=e.dims(),p=o*m.width;l(0,m.width-p,m.height-m.height*o,p)}}][b]();return this.animate(k,f,c,j,function(o){e.set(o).hide();g&&g.call(me,o)})}});i.dom.extend(i.animation)})();
