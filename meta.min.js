/*
 Copyright (c) 2010 Rolando González Chévere <rolosworld@gmail.com>
 
 This file is part of Meta.
 
 Meta is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License version 3
 as published by the Free Software Foundation.
 
 Meta is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with Meta.  If not, see <http://www.gnu.org/licenses/>.
*/
(function(){var E=this,B,F=!!E.ActiveXObject,J={name:"Meta",author:"Rolando Gonz\u00e1lez, rolosworld@gmail.com",version:"2010.02.10"},i=E.Meta=function(){function b(){return i}function c(h){var k=i.its(h),f=i.extensions[k];if(f)h=i(f).extend({_:h});else if(k!="meta"){f=i();k=="function"||i.its(h,"object")?f.extend(h):f.extend({_:h});h=f}return h.constructor}function e(h){function k(){}var f;if(h!==B)f=c(h);if(f){k.prototype=new f;k.prototype.constructor=k}k.prototype.info=J;k.prototype.under=function(j){if(f){var m=
[],a,d=this.under,g=arguments.length;for(a=1;a<g;a++)m.push(arguments[a]);this.under=f.prototype.under;m=f.prototype[j].apply(this,m);this.under=d;return m}};k.prototype.extend=function(j,m){return b().inherit(this,j,m)};return k}return function(h){return new (e(h))}}();i.extensions={};i.son=function(b){function c(){}c.prototype=b;return new c};i.extend=function(b,c,e){e=e||[];for(var h in c)if(h!="constructor"&&b!=c[h]&&i.indexOf(e,h)<0)b[h]=c[h];return b};i.inherit=function(b,c,e){var h=[],k=[],
f={};if(e){k=e.exclude||k;h=e.params||h}if(typeof c=="function"){c.apply(f,h);c=f}b=b.constructor?b.constructor.prototype:b;return i.extend(b,c,k)};i.each=function(b,c,e){var h;if(e)for(h in b){if(c.call(b,b[h],h)===false)return false}else{h=0;for(e=b.length;h<e;h++)if(c.call(b,b[h],h)===false)return false}return true};i.its=function(b,c){var e=typeof b;if(c==e)return true;if(e=="object"||e=="function")e=b?b.nodeType?"element":Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1].toLowerCase():
"null";else if(e=="number")if(isNaN(b))e="nan";else isFinite(b)||(e=b>0?"infinite":"-infinite");if(e=="meta"&&i.has(b,"info")&&i.has(b.info,"name")){if(c==e)return true;e=b.info.name}if(c)return c==e;return e};i.obj2array=function(b,c){if(!c&&!F)return Array.prototype.slice.call(b);else{var e=[];i.each(b,function(h){e.push(h)},c);return e}};i.indexOf=function(b,c,e){for(var h=b.length;h--;)if(e){if(b[h]==c)break}else if(b[h]===c)break;return h};i.unique=function(b){var c=[],e,h;e=0;for(h=b.length;e<
h;e++)i.indexOf(c,b[e])<0&&c.push(b[e]);return c};i.has=function(b,c){return b&&b[c]!==B&&b[c]!==null};i.genProperties=function(b,c,e){var h=0;b=b.split(",");for(var k=b[0];h<b.length;k=b[++h])e[k]=c(k)};i.toggle=function(b,c,e){e=e||false;return function(){return((e=!e)?b:c).apply(this,arguments)}};i.core=i();i.core.extend({_:null,son:function(){return i.son(this)},bro:function(b){return(new this.constructor).set(b)},its:function(b){return i.its(this._,b)},get:function(){return this._},set:function(b){this._=
b;return this},wrap:function(b,c){return this._[b].apply(this._,c)},copy:function(){return this.bro().set(this.get())},callback:function(b){for(var c=this,e=[],h=1,k=arguments;h<k.length;h++)e.push(k[h]);return function(){return c[b].apply(c,e)}},getMe:function(){return this}});i.ajax=function(b,c,e,h){function k(){if(c){var a=f.readyState;if(!m&&a==4)c.call(j,j);else c[a]&&c[a].call(j,j)}}e=e||"";h=h===B?i.ajax.async:h;var f=F?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,j={status:function(){return f.status},
text:function(){return f.responseText},json:function(){return eval("("+(j.text()||"null")+")")},xml:function(){return f.responseXML}},m=i.its(c,"array");f.open("POST",b,h);if(h)f.onreadystatechange=k;f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.send(e);h||k();return f};i.ajax.async=true;i.string=i(i.core);i.string.extend({bro:function(b){return(new this.constructor).set(b||"")},set:function(b){return this.under.call(this,"set",""+b)},len:function(){return this.get().length},
dos2unix:function(){return this.replace(/\r\n|\r/g,"\n")},unix2dos:function(){return this.replace(/\n/g,"\r\n")},stripTags:function(){return this.replace(/<\/?[^>]+>/g,"")},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},unescapeHTML:function(){var b=document.createElement("div");b.innerHTML=this.stripTags().get();return this.set(b.childNodes[0]?b.childNodes[0].nodeValue:"")},trim:function(){return this.replace(/^\s+|\s+$/g,
"")},rtrim:function(){return this.replace(/\s+$/,"")},ltrim:function(){return this.replace(/^\s+/,"")},insertAt:function(b,c){var e=this.get();return this.set(e.substr(0,b)+c+e.substr(b))},addSlashes:function(){return this.replace(/\\/g,"\\\\").replace(/\'/g,"\\'")},stripSlashes:function(){return this.replace(/\\'/g,"'").replace(/\\\\/g,"\\")},nl2br:function(){return this.dos2unix().replace(/\n/g,"<br/>")},br2nl:function(){return this.replace(/<br\s*\/?>/gi,"\n")},toInt:function(){return parseInt(this.get().match(/\d/g).join(""),
10)}});i.string.extend(function(){var b=i.genProperties;b("replace,concat,substr,substring,slice,toUpperCase,toLowerCase",function(c){return function(){return this.set(this.wrap(c,arguments))}},this);b("charAt,charCodeAt,indexOf,lastIndexOf,search,match,split,valueOf",function(c){return function(){return this.wrap(c,arguments)}},this)});i.extensions.string=i.string;i.array=i(i.core);i.array.extend({bro:function(){var b=new this.constructor,c;b.set([]);i.each(arguments,function(e){c=i.its(e);if(c==
"array")b.set(e);else c!="undefined"&&b.push(e)});return b},get:function(b){var c=this.under.call(this,"get");return i.its(b,"number")?c[b]:c},set:function(b,c){if(i.its(c,"number"))this.get()[c]=b;else this.under.call(this,"set",b);return this},indexOf:function(b,c){var e=this.get(),h=e.length;for(c=c||0;c<h;c++)if(e[c]===b)return c;return-1},lastIndexOf:function(b,c){var e=this.get();for(c=c+1||e.length;c--;)if(e[c]===b)break;return c},some:function(b,c){c=c||this;var e=this.get();return!i.each(e,
function(h,k){if(b.call(c,h,k,e))return false})},every:function(b,c){c=c||this;var e=this.get();return i.each(e,function(h,k){if(!b.call(c,h,k,e))return false})},filter:function(b,c){c=c||this;var e=[],h=this.get();i.each(h,function(k,f){b.call(c,k,f,h)&&e.push(k)});return e},forEach:function(b,c){var e=this.get();c=c||this;i.each(e,function(h,k){b.call(c,h,k,e)});return this},map:function(b,c){c=c||this;var e=[],h=this.get();i.each(h,function(k,f){e.push(b.call(c,k,f,h))});return e},numSort:function(){return this.sort(function(b,
c){return b-c})},insert:function(b,c){c==B?this.push(b):this.splice(c,0,b);return this},drop:function(b,c){return this.splice(b,c||1)},unique:function(){return this.set(i.unique(this.get()))},len:function(){return this.get().length},reduce:function(b,c){var e=this.len(),h=0,k=this.get();for(c=c||k[h++];h<e;h++)c=b.call(this,c,k[h],h,k);return c},reduceRight:function(b,c){var e=this.len(),h=e-1,k=this.get();if(!(e<1&&!c)){for(e=c||k[h--];h>=0;h--)e=b.call(this,e,k[h],h,k);return e}},shuffle:function(){for(var b=
this.get(),c=b.length,e=c-1,h,k;c--;){h=Math.round(Math.random()*e);k=b[c];b[c]=b[h];b[h]=k}return this}});i.array.extend(function(){var b=i.genProperties;b("push,sort,splice,unshift,reverse",function(c){return function(){this.wrap(c,arguments);return this}},this);b("pop,shift,join",function(c){return function(){return this.wrap(c,arguments)}},this);b("concat,slice",function(c){return function(){return this.set(this.wrap(c,arguments))}},this)});i.extensions.Array=i.array;i.cookie=i(i.core);i.cookie.extend({create:function(b){var c=
this.get()+"="+b.value,e;for(e in b)if(e!="value")c+=";"+e+"="+b[e];document.cookie=c},read:function(){for(var b=document.cookie.split(";"),c,e=b.length;e--;){c=b[e].replace(/^\s*|\s*$/g,"").split("=");if(c[0]==this.get())return decodeURIComponent(c[1])}return null},erase:function(){var b=new Date;b.setDate(b.getDate()-9);this.create({value:"","max-age":0,expire:b.toUTCString()})}});i.sandbox=function(){var b=document.createElement("iframe"),c,e;b.style.display="none";document.body.appendChild(b);
e=frames[frames.length-1];c=e.document;c.writeln("<script>window.sandbox=window.ActiveXObject?this:{eval:function(s){return eval(s)}};<\/script>");c.close();return{eval:function(h){return e.sandbox.eval(h)},include:function(h){var k=c.createElement("script");k.src=h;c.body.appendChild(k)}}};i.events=i(i.core);i.events.extend(function(){var b={},c=i.array.bro();this.onNewEvent=function(){};this.onEmptyEvent=function(){};this.onFireEvent=function(){};this.addEvent=function(e,h,k,f){f=f===B?1:f;var j=
-1,m=this;if(b[e])j=m.indexOfEvent(e,h);else b[e]=[];if(j<0){j={type:e,obj:h,cb:function(){return m.fireEvent.apply(m,c.set([e,h]).concat(i.obj2array(arguments)).get())},fn:[]};b[e].push(j);m.onNewEvent(j)}else j=b[e][j];c.set(j.fn);if(i.its(k,"array")){c.concat(k);j.fn=c.get()}else if(f||c.indexOf(k)<0)c.push(k);return m};this.getEvent=function(e,h){return b[e]&&b[e][h]?b[e][h]:null};this.getObjectEvents=function(e){var h=[],k,f=this;for(var j in b){k=f.indexOfEvent(j,e);k>-1&&h.push(b[j][k])}return h};
this.indexOfEvent=function(e,h){var k=-1;if(!b[e])return k;c.set(b[e]).every(function(f,j){if(f.obj==h){k=j;return false}return true});return k};this.fireEvent=function(e,h){var k=this,f=k.indexOfEvent(e,h),j=true,m;if(f<0)return false;f=b[e][f];m=[];i.each(arguments,function(a,d){d>1&&m.push(a)});i.each(f.fn,function(a){if(a.apply(h,m)===false)j=false});k.onFireEvent(f,j,m);return j};this.rmEvent=function(e,h,k){var f=-1,j,m=this.indexOfEvent(e,h);if(m<0)return this;h=b[e][m];if(k){j=c.set(h.fn);
f=j.indexOf(k);f>-1&&j.drop(f)}else h.fn=[];if(!h.fn.length){c.set(b[e]).drop(m);this.onEmptyEvent(h)}return this};this.rmObject=function(e){var h=this;i.each(b,function(k,f){h.rmEvent(f,e)},1);return h};this.flush=function(e){e=e||function(){return 1};var h=this,k=[],f;i.each(b,function(j,m){for(f=j.length;f--;)e(m,j[f].obj)&&h.rmEvent(m,j[f].obj);j.length||k.push(m)},1);for(f=k.length;f--;)delete b[k[f]];return h};this.ev=b});i.domevent=i(i.array);i.domevent.extend(i.events,{exclude:["bro","sup",
"get","set"]});i.domevent.extend({valid_type:" abort blur change click dblclick error focus keydown keypress keyup load mousedown mousemove mouseout mouseover mouseup reset resize select submit unload ",onNewEvent:function(b){if(this.valid_type.indexOf(" "+b.type+" ")!=-1)if(i.has(b.obj,"addEventListener"))b.obj.addEventListener(b.type,b.cb,false);else i.has(b.obj,"attachEvent")&&b.obj.attachEvent("on"+b.type,b.cb)},onEmptyEvent:function(b){if(this.valid_type.indexOf(" "+b.type+" ")!=-1)if(i.has(b.obj,
"removeEventListener"))b.obj.removeEventListener(b.type,b.cb,false);else i.has(b.obj,"detachEvent")&&b.obj.detachEvent("on"+b.type,b.cb)},onFireEvent:function(b,c,e){if(!(c||this.valid_type.indexOf(" "+b.type+" ")==-1)){e[0].cancelBubble=true;e[0].returnValue=false;e[0].stopPropagation&&e[0].stopPropagation();e[0].preventDefault&&e[0].preventDefault()}},on:function(b,c){var e=this;if(c)return e.forEach(function(h){e.addEvent(b,h,c)})},fire:function(b){var c=this;return c.forEach(function(e){e["on"+
b]&&e["on"+b]();c.fireEvent(b,e)})},rmOn:function(b,c){var e=this;return e.forEach(function(h){e.rmEvent(b,h,c)})},cleanEvents:function(){return this.flush(function(b,c){return c.parentNode===null})}});i.domevent.addEvent("unload",E,function(){i.events.flush();document&&document.body&&i.dom.purge(document.body)});i.animation=function(){function b(k,f,j,m,a,d){function g(){var w=(new Date).getTime();if(w>=n)return false;a.call(d,f+(w-p)*q/v)}function l(){k&&k.call(u,d)}var p=(new Date).getTime(),n=
p+(m||200),q=j-f,v=n-p,u=this;c.addEvent("frameStep",c,g);c.addEvent("stopAnim",c,l);c.fireEvent("frameStep",c)}var c=i.events.bro(),e=1E3/30,h=["clip","position","width","height","left","top","display","visibility","overflow","filter","MozOpacity","zoom","opacity","KHTMLOpacity"];c.onFireEvent=function(k,f){if(k.type=="frameStep")if(f)setTimeout(c.callback("fireEvent","frameStep",c),e);else{c.rmEvent("frameStep",c);c.fireEvent("stopAnim",c);c.rmEvent("stopAnim",c)}};return{data:"data-meta_",cssBackup:function(){var k=
i.dom.bro(),f,j=this;return j.forEach(function(m){k.set(m);m=parseInt(k.attr(j.data+"bak"),10)||0;k.attr(j.data+"bak",m+1);if(!m){i.each(h,function(a){f=k.css(a);f!==null&&k.attr(j.data+a,f)});if(!k.attr(j.data+"size_w")){f=k.dims();k.attr(j.data+"size_w",f.width).attr(j.data+"size_h",f.height)}if(!k.attr(j.data+"pos_l")){f=k.dims();k.attr(j.data+"pos_l",f.left).attr(j.data+"pos_t",f.top)}}})},cssRestore:function(k){function f(d){m=j.attr(a.data+d);j.css(d,"");m!==null&&j.css(d,m)}var j=i.dom.bro(),
m,a=this;return a.forEach(function(d){if(j.set(d).attr(a.data+"bak"))k?f(k):i.each(h,f)})},cssBackupClear:function(){var k=i.dom.bro(),f=this;return f.forEach(function(j){k.set(j);i.each(h,function(m){k.attr(f.data+m,null)});k.attr(f.data+"bak",null).attr(f.data+"size_w",null).attr(f.data+"size_h",null).attr(f.data+"pos_l",null).attr(f.data+"pos_t",null)})},animate:function(k,f,j,m,a,d){var g=this;g.cssBackup();g.cssRestore("display");g.__||c.addEvent("stopAnim",c,function(){if(d){g.cssRestore();
g.cssBackupClear()}g.__=0});g.__=1;return this.forEach(function(l){b.call(g,a,k.call(l),f.call(l),j,m,l)})},slide:function(k,f,j){var m=this,a=i.dom.bro(),d,g,l,p,n=function(){return 0},q=function(){return a.set(this).dims().width},v=function(){return a.set(this).dims().height},u=function(){return 1},w=function(o){a.set(this).css("width",o+"px").css("overflow","hidden")},y=function(o){a.set(this).css("height",o+"px").css("overflow","hidden")},z=function(o){a.set(this);var x=[a.attr(m.data+"size_w"),
a.attr(m.data+"size_h")];a.css("width",o*x[0]+"px").css("height",o*x[1]+"px").css("overflow","hidden")},A=function(o){j&&j.call(m,o)},r=function(o){a.set(o).hide();j&&j.call(m,o)};({"up-left":function(){d=u;g=n;l=z;A=r},right:function(){d=n;g=q;l=w;p=1},left:function(){d=q;g=n;l=w;A=r},up:function(){d=v;g=n;l=y;A=r},down:function(){d=n;g=v;l=y;p=1},"down-right":function(){d=n;g=u;l=z;p=1}})[k]();return m.animate(d,g,f,l,A,p)},fade:function(k,f,j){var m=this,a=i.dom.bro(),d,g;d=function(){return 0};
var l=function(){return 1},p=function(q){j&&j.call(m,q)},n=function(q){a.set(q).hide();j&&j.call(m,q)};if(k=="out"){k=l;d=d;p=n}else{k=d;d=l;g=1}return this.animate(k,d,f,function(q){a.set(this).opacity(q)},p,g)}}}();i.dom=i(i.domevent);i.dom.info.name="Meta.dom";i.dom.extend(i.animation);i.dom.extend(function(){function b(){j=i.sandbox();return m=j.eval('document.createElement("div");')}function c(a){if(a=="float")a=F?"styleFloat":"cssFloat";a=a.split("-");for(var d=1,g=a.length,l;d<g;d++){l=a[d];
a[d]=l.charAt(0).toUpperCase();a[d]+=l.substr(1)}return a.join("")}function e(a){return a.value!==null&&a.value!==B&&a.value.length>0?a.value:a.text}var h={before:function(a,d,g){g&&g.insertBefore(d,a)},after:function(a,d,g){g&&g.insertBefore(d,a.nextSibling)},replace:function(a,d,g){g&&g.replaceChild(d,a)},prepend:function(a,d){a.insertBefore(d,a.firstChild||null)},append:function(a,d){a.appendChild(d)}},k=i.string.bro(),f=i.array.bro(),j,m;return{_doc:document,bro:function(){var a=["bro"],d=arguments;
if(d.length)a=a.concat(i.obj2array(d));else a.push(this.doc());return this.under.apply(this,a)},set:function(a,d){a=a||this.doc();if(!i.its(d,"number")&&!i.its(a,"array"))a=[a];return this.under.apply(this,["set",a,d])},doc:function(a){if(!a)return this._doc=this._doc||document;if(!i.its(a,"string")){this._doc=a.nodeType==9?a:a.ownerDocument?a.ownerDocument:document;return this}if(F){this._doc=new ActiveXObject("Msxml2.DOMDocument");this._doc.async=false;this._doc.loadXML(a)}else this._doc=(new DOMParser).parseFromString(a,
"text/xml");this.set(i.obj2array(this._doc.childNodes));return this},select:function(a,d){var g=this,l=[],p=i.select,n,q;if(a.nodeType){g._=[a];return g}else if(d){if(d.nodeType)g._=[d];q=g._;n=q.length;for(d=0;d<n;d++)l=l.concat(p(a,q[d]))}else l=p(a,g.doc());g._=l;return g},evalGlobal:function(a){var d=this.doc(),g=d.createElement("script"),l=d.getElementsByTagName("head")[0]||d.documentElement;g.type="text/javascript";if(F)g.text=a;else g.appendChild(d.createTextNode(a));l.insertBefore(g,l.firstChild);
l.removeChild(g);return this},glue:function(a,d){if(a==="")return this;var g,l,p,n,q=this;d=h[d||"append"];g=q.son();n=[];var v=[],u;if(a.nodeType)g._=[a];else if(typeof a=="string")g.create(a);else g._=a;p=g._;g=p.length;l=q.doc().createDocumentFragment();for(a=0;a<g;a++){u=p[a];if(u.nodeName.toLowerCase()=="script")n.push(u);else if(u.nodeType==1)n=n.concat(i.obj2array(u.getElementsByTagName("script")));l.appendChild(u)}g=n.length;for(a=0;a<g;a++){u=n[a];if(!u.src){v.push(u.text||u.textContent||
u.innerHTML||"");u.parentNode.removeChild(u)}}v=v.join("\n");p=q._;g=p.length;for(a=0;a<g;a++){n=p[a];d(n,a?l.cloneNode(true):l,n.parentNode);q.evalGlobal(v)}return q},remove:function(){for(var a=this._,d=a.length,g;d--;){g=a[d];g.parentNode&&g.parentNode.removeChild(g)}return this},create:function(a){var d=this.doc().createElement("div"),g=[],l;if(this.isXML(d)){(l=m)||(l=b());l.innerHTML=a;i.dom.copyNodes(l.childNodes,d)}else if(F){d.innerHTML="<br>"+a;d.removeChild(d.firstChild)}else d.innerHTML=
a;for(;l=d.firstChild;)g.push(d.removeChild(l));return this.set(g)},prop:function(a,d){return(d=this.get(d||0))?a in d?d[a]:null:d},attr:function(a,d){var g,l=this._;g=l.length;var p,n;if(!g)return null;p=l[0];n=p.attributes;if(!a)return n;if(d!==B){for(g=g;g--;)d===null&&l[g].removeAttribute?l[g].removeAttribute(a):l[g].setAttribute(a,d);return this}if(!n)return null;return p.getAttribute(a)},css:function(a,d){var g=this._,l=g.length;a=c(a);if(d===B)return l?g[0].style[a]:null;for(;l--;)g[l].style[a]=
d;return this},style:function(a,d){if(d=this.get(d||0)){a=c(a);d=E.getComputedStyle?E.getComputedStyle(d,null).getPropertyValue(a):d.currentStyle[a]}return d},val:function(a){var d,g=[],l,p=this._,n=p.length,q=i.indexOf;if(a!==B){for(;n--;){d=p[n];if(d.nodeName=="SELECT"){a.push||(a=[a]);l=d.options;for(d=l.length;d--;){g=l[d];g.selected=false;if(q(a,e(g),1)>-1)g.selected=true}}else d.value=a}return this}if(!n)return null;a=p[0];if(a.nodeName!="SELECT")return a.value||null;if(!a.multiple)return e(a.options[a.selectedIndex]);
a=a.options;for(d in a)a[d].selected&&g.push(e(a[d]));return g},outer:function(a){var d=this._,g=d.length,l;a=d[a||0];if(!a||!a.nodeType)return null;if(a.nodeType==3)return a.nodeValue;if(!F){if(this.isXML(a))return(new XMLSerializer).serializeToString(a);d=this.doc().createElement("b");d.appendChild(a);return d.innerHTML}d=this.isXML(a)?"xml":"outerHTML";if(a.nodeType!=11)l=a[d];else{l=[];a=a.childNodes;for(g=a.length;g--;)l.push(a[g][d]);l.reverse();l=l.join("")}return l},inner:function(a,d){var g=
this._,l="",p=this.son();if(a===B){if(!g.length)return null;a=g[0];if(!this.isXML(a))return a.innerHTML;a=a.childNodes;d=0;for(g=a.length;d<g;d++)l+=p.set(a[d]).outer();return l}return this.empty().append(a,d)},text:function(a){if(a===B){a=this._;if(!a.length)return null;a=a[0];return a.innerHTML?a.innerHTML.replace(/<\/?[^>]+>/gi,""):a.text||a.textContent}return this.empty().append(this.doc().createTextNode(a))},elements:function(a){var d=this._;if(!d.length)return null;var g=[],l=d[0];if(l.nodeName.toUpperCase()!=
"FORM")return null;l=l.elements;for(d=l.length;d--;)if(a===B)g.push(g[l[d].name]=l[d]);else if(l[d].name==a)return l[d];return a?null:g},submit:function(a){var d=this._;if(!d.length)return this;a=a||function(){};for(var g=this.elements(),l=this.son(),p=[],n=0,q,v,u;n<g.length;n++){u=g[n];if(u.nodeName.toUpperCase()!="FIELDSET")if(!(u.nodeName.toUpperCase()=="INPUT"&&(u.type.toLowerCase()=="checkbox"||u.type.toLowerCase()=="radio")&&!u.checked)){q=l.set(u).val();v=encodeURIComponent(u.name,1)+"=";
i.its(q,"array")?i.each(q,function(w){p.push(v+encodeURIComponent(w===null||w===B?"":w,1))}):p.push(v+encodeURIComponent(q===null||q===B?"":q,1))}}i.ajax(d[0].action,a,p.join("&"));return this},nodes:function(a){var d=this._,g=[],l=d.length;a=a||0;if(l<=a)return null;l=d[a].childNodes;d=l.length;for(a=0;a<d;a++)l[a].nodeType==1&&g.push(l[a]);return g},empty:function(){for(var a,d=this._,g=d.length,l=this.isXML();g--;){a=d[g];if(l)for(;a.firstChild;)a.removeChild(a.firstChild);else a.innerHTML=""}return this},
hasClass:function(a,d){var g=this._,l=g.length;d=d||0;if(l<=d)return false;d=g[d];if(!d.className)return false;return(" "+d.className+" ").indexOf(" "+a+" ")>-1},addClass:function(a){for(var d=this._,g=d.length,l;g--;){l=d[g];if("className"in l)l.className=k.set(f.set(l.className.split(" ")).insert(a).unique().get().join(" ")).trim().get()}return this},rmClass:function(a){for(var d=this._,g=d.length,l,p,n;g--;){l=d[g];if(l.className){p=f.set(l.className.split(" ")).unique();n=p.indexOf(a);if(n>-1)l.className=
k.set(p.splice(n,1).get().join(" ")).trim().get()}}return this},dims:function(a){if(a=this.get(a||0)){for(var d=a.offsetLeft||0,g=a.offsetTop||0,l=a.offsetWidth||0,p=a.offsetHeight||0;a=a.offsetParent;){d+=a.offsetLeft-a.scrollLeft+(a.clientLeft?a.clientLeft:0);g+=a.offsetTop-a.scrollTop+(a.clientTop?a.clientTop:0)}a={left:d,top:g,width:l,height:p}}return a},scrollDims:function(a){return(a=this.get(a||0))?{left:a.scrollX||a.scrollLeft,top:a.scrollY||a.scrollTop,width:a.scrollWidth||0,height:a.scrollHeight||
0}:a},opacity:function(a){var d=Math.round(a*100);return this.css("MozOpacity",a).css("opacity",a).css("KHTMLOpacity",a).css("zoom",1).css("filter","alpha(opacity="+d+")")},hide:function(){return this.css("display","none")},show:function(a){return this.css("display",a||"")},parent:function(a){return this.prop("parentNode",a)},next:function(a){for(a=this.get(a||0);a&&(a=a.nextSibling)&&a.nodeType!=1;);return a},prev:function(a){for(a=this.get(a||0);a&&(a=a.previousSibling)&&a.nodeType!=1;);return a},
first:function(a){for(a=this.prop("firstChild",a);a&&a.nodeType!=1;)a=a.nextSibling;return a},last:function(a){for(a=this.prop("lastChild",a);a&&a.nodeType!=1;)a=a.previousSibling;return a},value:function(a){return this.prop("nodeValue",a)},type:function(a){return this.prop("nodeType",a)},name:function(a){return this.prop("nodeName",a)},isXML:function(a){a||(a=this.doc());a=a.nodeType==9?a:a.ownerDocument;return a.documentElement.nodeName!=="HTML"}}}());i.dom.extend(function(){i.genProperties("prepend,append,before,after,replace",
function(b){return function(c){return this.glue(c,b)}},this)});i.dom.extend(function(){var b={prependTo:"prepend",appendTo:"append",insertBefore:"before",insertAfter:"after",replaceIn:"replace"};i.genProperties("prependTo,appendTo,insertBefore,insertAfter,replaceIn",function(c){return function(e){var h=this._;return this.set(e).glue(h,b[c]).set(h)}},this)});i.extensions.element=i.dom;i.dom.copyNodes=function(b,c,e,h){var k=c.ownerDocument?c.ownerDocument:c.nodeType==9?c:document,f=function(m,a){for(var d,
g=0,l=a.length;g<l;g++){if(a[g].nodeType==1)d=m.appendChild(j(a[g]));else a[g].nodeType==3&&m.appendChild(k.createTextNode(a[g].nodeValue));if(h==a[g])h=d}},j=function(m){if(e&&m&&!m.id&&i.has(m,"uniqueID"))m.id=m.uniqueID;var a=i.dom.cloneTag(m);f(a,m.childNodes);return a};f(c,b);return h};i.dom.cloneTag=function(b,c){c=c||(b.ownerDocument?b.ownerDocument:document);c=c.createElement(b.nodeName.toLowerCase());var e;b=b.attributes;for(e=b.length;e--;)c.setAttribute(b[e].name,b[e].value);return c};
i.dom.cloneNode=function(b,c){c=c||(b.ownerDocument?b.ownerDocument:document);if(b.nodeType==3)return c.createTextNode(b.nodeValue);c=i.dom.cloneTag(b,c);i.dom.copyNodes(b.childNodes,c);return c};i.dom.ready=function(){var b=0,c,e,h=i.events.bro(),k;h.extend({fireReady:function(){if(!b){b=1;this.fireEvent("ready",E);e&&clearInterval(e)}}});k=h.callback("fireReady");if(i.has(document,"addEventListener"))document.addEventListener("DOMContentLoaded",k,false);else if(i.has(E,"ActiveXObject")){c=document.createElement("script");
c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){k();c.onreadystatechange=null}};c.defer=true;c.src="javascript:void(0);";document.getElementsByTagName("HEAD")[0].appendChild(c)}else if(/Safari/i.test(navigator.userAgent))e=setInterval(function(){/loaded|complete/.test(document.readyState)&&k()},10);i.dom.addEvent("load",E,k);return function(f){b?f():h.addEvent("ready",E,f)}}();i.dom.purge=function(b){if(F||b.attributes){var c=b.attributes,e,h;if(c)for(e=c.length;e--;){h=c[e].name;
if(typeof b[h]==="function")b[h]=null}if(c=b.childNodes)for(e=c.length;e--;)i.dom.purge(c[e])}};i.guiEngine=i(function(){function b(){if(!("meta_sel"in q)){q.meta_sel=1;q.meta_onselectstart=n.get().onselectstart;q.meta_unselectable=n.get().unselectable;q.meta_MozUserSelect=n.css("MozUserSelect");q.meta_KhtmlUserSelect=n.css("KhtmlUserSelect")}}function c(){if("meta_sel"in q){n.css("MozUserSelect",q.meta_MozUserSelect);n.css("KhtmlUserSelect",q.meta_KhtmlUserSelect);n.get().onselectstart=q.meta_onselectstart;
n.get().unselectable=q.meta_unselectable}}function e(){b();n.get().onselectstart=function(){return false};n.get().unselectable="on";n.css("MozUserSelect","none").css("KhtmlUserSelect","none")}function h(r){return r?r:E.event}function k(r){if(!y||!g.len())return false;r=h(r);var o=[r.screenX-w[0],r.screenY-w[1]];"mmv"in A[y]&&A[y].mmv(r,o);r.cancelBubble=true;return false}function f(r){r=h(r);g.set(r.target||r.srcElement);y=g.attr("gui");if(!(y in A))return false;var o=g.attr("dad"),x=g.attr("limit");
o&&g.select("#"+o);x?l.select("#"+x):l.set(n.get());m();"md"in A[y]&&A[y].md(r);w=[r.screenX,r.screenY];r.cancelBubble=true;return false}function j(r){if(!y)return false;r=h(r);"mu"in A[y]&&A[y].mu(r);w=[r.screenX,r.screenY];r.cancelBubble=true;y="";return false}function m(){var r=l.dims();v=[r.left,r.top,t.width+r.left,t.height+r.top]}function a(){if(!z){p.on("mousemove",k).on("mousedown",f).on("mouseup",j);z=1;n=i.dom.bro().set(document.body);l.set(n.get());m()}}function d(){if(z){p.rmOn("mousemove",
k).rmOn("mousedown",f).rmOn("mouseup",j);z=0}}var g=i.dom.bro(),l=i.dom.bro(),p=i.domevent.bro(document),n,q={},v=[0,0,0,0],u={left:0,top:0,width:0,height:0},w=[0,0],y="",z=0,A={drag:{md:function(){u=g.dims();e();g.css("position","absolute").css("zIndex","1")},mu:function(){c();g.css("zIndex","0")},mmv:function(r,o){var x=u,C=[v[2]-s[0],v[3]-s[1]];o=[x.left+o[0],x.top+o[1]];if(o[0]>=v[0]&&o[0]<C[0]){x.left=o[0];w[0]=r.screenX}else if(o[0]<v[0])o[0]=v[0];else if(o[0]>C[0])o[0]=C[0];if(o[1]>=v[1]&&
o[1]<C[1]){x.top=o[1];w[1]=r.screenY}else if(o[1]<v[1])o[1]=v[1];else if(o[1]>C[1])o[1]=C[1];g.css("left",o[0]+"px");g.css("top",o[1]+"px")}},resize:{md:function(){e()},mu:function(){c()},mmv:function(r,o){var x=g.dims();o=[x.width+o[0],x.height+o[1]];if(o[0]>=10){g.css("width",o[0]+"px");w[0]=r.screenX}if(o[1]>=10){g.css("height",o[1]+"px");w[1]=r.screenY}}}};return{guiStart:a,guiStop:d,guiEngine:function(){return z}}}());i.select=function(){function b(f,j,m){var a,d=0;if(f){d=1;for(a in j)if(j[a]&&
!m[a](f,j[a])){d=0;break}}return d}var c={CHUNKER:/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]+['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[]+)+|[>+~])(\s*,\s*)?/g,ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/g,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/g,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/g,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/g,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/g,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/g,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/g,
PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/g},e={"=":function(f,j){return f==j},"!=":function(f,j){return f!=j},"~=":function(f,j){return f!==null&&(" "+f+" ").indexOf(j)>-1},"^=":function(f,j){return f!==null&&f.indexOf(j)==0},"*=":function(f,j){return f!==null&&f.indexOf(j)>-1},"$=":function(f,j){return f!==null&&f.lastIndexOf(j)+j.length==f.length},"|=":function(f,j){return f==j||f.indexOf(j+"-")==0},"":function(f){return f!==null}},h={tag:function(f,
j){return f.nodeName==j||j=="*"},className:function(f,j){return(f=f.className)&&(" "+f+" ").indexOf(" "+j+" ")>-1},attr:function(f,j){for(var m,a,d=j.length;d--;){a=j[d];m=a[1];if(f.nodeType==1){m=f.getAttribute(m);if(m!==null&&a[2](m,a[4]))continue}return 0}return 1},pseudo:function(){return 0},nest:function(f,j){var m=j[0];j=j[1];var a;if(!f)return 0;if(m[parseInt(f.getAttribute(j),10)]!=f){a=m.length;f.setAttribute(j,a);m[a]=f;return 1}return 0}},k={">":function(f,j,m,a,d,g,l){var p=f.childNodes;
a=[];j=0;for(m=p.length;j<m;j++){f=p[j];f.nodeType==1&&g(f,d,l)&&a.push(f)}return a},"~":function(f,j,m,a,d,g,l){for(j=[];f=f.nextSibling;)f.nodeType==1&&g(f,d,l)&&j.push(f);return j},"+":function(f,j,m,a,d,g,l){for(;(f=f.nextSibling)&&f.nodeType!=1;);return g(f,d,l)?[f]:[]}};return function(f,j){j=j||document;if(j.querySelectorAll)return i.obj2array(j.querySelectorAll(f));var m=c.CHUNKER,a,d,g,l,p,n=[j],q=c.ID,v=c.CLASS,u=c.ATTR,w=c.TAG,y=j.nodeType==9?j:j.ownerDocument,z,A,r,o,x,C,K=y.documentElement.nodeName!==
"HTML",G,I=0,H=[],D={};for(m.lastIndex=0;a=m.exec(f);){l=a[1];if(l==">"||l=="~"||l=="+")p=k[l];else{G=[];q.lastIndex=0;if(d=q.exec(l)){o=y.getElementById(d[1]);n=h.nest(o,[G,"data-metaNest"])?[o]:[]}else{D.nest=[G,"data-metaNest"];D.attr=[];for(u.lastIndex=0;(d=u.exec(l))!==null;){d[2]=e[d[2]||""];D.attr.push(d)}if(!D.attr.length)D.attr=0;if(!D.attr){v.lastIndex=0;d=v.exec(l);D.className=d?d[1]:d}w.lastIndex=0;d=(d=w.exec(l))?d[1]:"*";d=K?d:d.toUpperCase();D.tag=d;x=[];z=0;for(A=n.length;z<A;z++){o=
n[z];if(p)x=x.concat(p(o,d,"data-metaNest",G,D,b,h));else{v.lastIndex=0;if((g=v.exec(l))&&o.getElementsByClassName){C=o.getElementsByClassName(g[1]);g=0}else C=o.getElementsByTagName(d);if(!g)D.className=0;g=0;for(r=C.length;g<r;g++){o=C[g];b(o,D,h)&&x.push(o)}}}n=x}p=null;if(a[2]&&a[2].replace(/^\s+|\s+$/g,"")==","){H[I++]=n;n=[j]}}}H[I]=n;G=[];n=[];z=0;for(A=H.length;z<A;z++){C=H[z];g=0;for(r=C.length;g<r;g++){o=C[g];h.nest(o,[G,"data-metaNest"])&&n.push(o)}}return n}}()})();
